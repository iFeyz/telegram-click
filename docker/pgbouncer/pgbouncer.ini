[databases]
clickgame = host=postgres port=5432 dbname=clickgame user=postgres password=password

[pgbouncer]
listen_addr = 0.0.0.0
listen_port = 5432
auth_type = md5
auth_file = /etc/pgbouncer/userlist.txt

# Connection Pooling - Optimized for 5k concurrent users
pool_mode = transaction
max_client_conn = 3000
default_pool_size = 150
reserve_pool_size = 75
reserve_pool_timeout = 5
max_db_connections = 200

# Server connection management
server_lifetime = 3600
server_idle_timeout = 600
server_reset_query = DISCARD ALL

# Logging
admin_users = postgres
stats_users = postgres
log_connections = 1
log_disconnections = 1
log_pooler_errors = 1

# Performance
ignore_startup_parameters = extra_float_digits,search_path,application_name

# Timeouts
query_timeout = 30
query_wait_timeout = 30
client_idle_timeout = 600
