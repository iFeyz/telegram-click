<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1433px" preserveAspectRatio="none" style="width:1012px;height:1433px;background:#FEFEFE;" version="1.1" viewBox="0 0 1012 1433" width="1012px" zoomAndPan="magnify"><title>Simple Click Flow Explanation</title><defs/><g><rect fill="#FEFEFE" height="1433" style="stroke:none;stroke-width:1;" width="1012" x="0" y="0"/><rect fill="#FFFFCC" height="26.6406" rx="2.5" ry="2.5" style="stroke:#FFDD88;stroke-width:3;" width="1001.2441" x="5" y="5"/><text fill="#000000" font-family="monospace" font-size="10" lengthAdjust="spacing" textLength="355.21" x="10" y="20">Please&#160;use&#160;'!option&#160;handwritten&#160;true'&#160;to&#160;enable&#160;handwritten</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="215.5303" x="386.8569" y="65.1758">Simple Click Flow Explanation</text><g><title>Browser</title><rect fill="#FFFFFF" height="132.8633" style="stroke:#181818;stroke-width:1;" width="10" x="135.0005" y="248.0371"/></g><g><title>Browser</title><rect fill="#FFFFFF" height="65.9316" style="stroke:#181818;stroke-width:1;" width="10" x="135.0005" y="751.8691"/></g><g><title>WebSocket</title><rect fill="#FFFFFF" height="370.9688" style="stroke:#181818;stroke-width:1;" width="10" x="426" y="380.9004"/></g><g><title>Game</title><rect fill="#FFFFFF" height="281.7266" style="stroke:#181818;stroke-width:1;" width="10" x="652.9644" y="425.5215"/></g><g><title>Game</title><rect fill="#FFFFFF" height="303.3477" style="stroke:#181818;stroke-width:1;" width="10" x="652.9644" y="905.4219"/></g><g><title>Redis</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="838.2861" y="528.7637"/></g><g><title>Redis</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="838.2861" y="633.3164"/></g><g><title>Redis</title><rect fill="#FFFFFF" height="59.9316" style="stroke:#181818;stroke-width:1;" width="10" x="838.2861" y="955.043"/></g><g><title>Redis</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="838.2861" y="1179.459"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="936.4507" y="1105.5273"/></g><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="1180.5273" width="8" x="29.1826" y="158.1055"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="33" x2="33" y1="158.1055" y2="1338.6328"/></g><g><title>Browser</title><rect fill="#000000" fill-opacity="0.00000" height="1180.5273" width="8" x="136.0005" y="158.1055"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="139.1963" x2="139.1963" y1="158.1055" y2="1338.6328"/></g><g><title>WebSocket</title><rect fill="#000000" fill-opacity="0.00000" height="1180.5273" width="8" x="427" y="158.1055"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="430.4414" x2="430.4414" y1="158.1055" y2="1338.6328"/></g><g><title>Game</title><rect fill="#000000" fill-opacity="0.00000" height="1180.5273" width="8" x="653.9644" y="158.1055"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="657.2983" x2="657.2983" y1="158.1055" y2="1338.6328"/></g><g><title>Redis</title><rect fill="#000000" fill-opacity="0.00000" height="1180.5273" width="8" x="839.2861" y="158.1055"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="842.915" x2="842.915" y1="158.1055" y2="1338.6328"/></g><g><title>PostgreSQL</title><rect fill="#000000" fill-opacity="0.00000" height="1180.5273" width="8" x="937.4507" y="158.1055"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="940.6572" x2="940.6572" y1="158.1055" y2="1338.6328"/></g><g class="participant participant-head" data-participant="user"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.3652" x="15" y="155.1523">User</text><ellipse cx="33.1826" cy="90.1172" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M33.1826,98.1172 L33.1826,125.1172 M20.1826,106.1172 L46.1826,106.1172 M33.1826,125.1172 L20.1826,140.1172 M33.1826,125.1172 L46.1826,140.1172" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="user"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.3652" x="15" y="1351.168">User</text><ellipse cx="33.1826" cy="1362.6211" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M33.1826,1370.6211 L33.1826,1397.6211 M20.1826,1378.6211 L46.1826,1378.6211 M33.1826,1397.6211 L20.1826,1412.6211 M33.1826,1397.6211 L46.1826,1412.6211" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="browser"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91.6084" x="94.1963" y="110.1289"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.833" x="113.084" y="130.6641">Browser</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.6084" x="101.1963" y="147.1523">(React App)</text></g><g class="participant participant-tail" data-participant="browser"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91.6084" x="94.1963" y="1337.6328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.833" x="113.084" y="1358.168">Browser</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.6084" x="101.1963" y="1374.6563">(React App)</text></g><g class="participant participant-head" data-participant="ws"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87.1172" x="387.4414" y="110.1289"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.1172" x="394.4414" y="130.6641">WebSocket</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41.8428" x="410.0786" y="147.1523">Server</text></g><g class="participant participant-tail" data-participant="ws"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87.1172" x="387.4414" y="1337.6328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.1172" x="394.4414" y="1358.168">WebSocket</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41.8428" x="410.0786" y="1374.6563">Server</text></g><g class="participant participant-head" data-participant="game"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="61.332" x="627.2983" y="110.1289"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38.7188" x="638.605" y="130.6641">Game</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.332" x="634.2983" y="147.1523">Service</text></g><g class="participant participant-tail" data-participant="game"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="61.332" x="627.2983" y="1337.6328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38.7188" x="638.605" y="1358.168">Game</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.332" x="634.2983" y="1374.6563">Service</text></g><g class="participant participant-head" data-participant="redis"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.6475" x="821.9624" y="138.6641">Redis</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.7422" x="798.915" y="155.1523">(Temporary)</text><path d="M825.2861,89.1289 C825.2861,79.1289 843.2861,79.1289 843.2861,79.1289 C843.2861,79.1289 861.2861,79.1289 861.2861,89.1289 L861.2861,115.1289 C861.2861,125.1289 843.2861,125.1289 843.2861,125.1289 C843.2861,125.1289 825.2861,125.1289 825.2861,115.1289 L825.2861,89.1289" fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M825.2861,89.1289 C825.2861,99.1289 843.2861,99.1289 843.2861,99.1289 C843.2861,99.1289 861.2861,99.1289 861.2861,89.1289" fill="none" style="stroke:#181818;stroke-width:1.5;"/></g><g class="participant participant-tail" data-participant="redis"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.6475" x="821.9624" y="1351.168">Redis</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.7422" x="798.915" y="1367.6563">(Temporary)</text><path d="M825.2861,1380.6094 C825.2861,1370.6094 843.2861,1370.6094 843.2861,1370.6094 C843.2861,1370.6094 861.2861,1370.6094 861.2861,1380.6094 L861.2861,1406.6094 C861.2861,1416.6094 843.2861,1416.6094 843.2861,1416.6094 C843.2861,1416.6094 825.2861,1416.6094 825.2861,1406.6094 L825.2861,1380.6094" fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M825.2861,1380.6094 C825.2861,1390.6094 843.2861,1390.6094 843.2861,1390.6094 C843.2861,1390.6094 861.2861,1390.6094 861.2861,1380.6094" fill="none" style="stroke:#181818;stroke-width:1.5;"/></g><g class="participant participant-head" data-participant="db"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.8496" x="900.0259" y="138.6641">PostgreSQL</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.5869" x="897.6572" y="155.1523">(Permanent)</text><path d="M923.4507,89.1289 C923.4507,79.1289 941.4507,79.1289 941.4507,79.1289 C941.4507,79.1289 959.4507,79.1289 959.4507,89.1289 L959.4507,115.1289 C959.4507,125.1289 941.4507,125.1289 941.4507,125.1289 C941.4507,125.1289 923.4507,125.1289 923.4507,115.1289 L923.4507,89.1289" fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M923.4507,89.1289 C923.4507,99.1289 941.4507,99.1289 941.4507,99.1289 C941.4507,99.1289 959.4507,99.1289 959.4507,89.1289" fill="none" style="stroke:#181818;stroke-width:1.5;"/></g><g class="participant participant-tail" data-participant="db"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.8496" x="900.0259" y="1351.168">PostgreSQL</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.5869" x="897.6572" y="1367.6563">(Permanent)</text><path d="M923.4507,1380.6094 C923.4507,1370.6094 941.4507,1370.6094 941.4507,1370.6094 C941.4507,1370.6094 959.4507,1370.6094 959.4507,1380.6094 L959.4507,1406.6094 C959.4507,1416.6094 941.4507,1416.6094 941.4507,1416.6094 C941.4507,1416.6094 923.4507,1416.6094 923.4507,1406.6094 L923.4507,1380.6094" fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M923.4507,1380.6094 C923.4507,1390.6094 941.4507,1390.6094 941.4507,1390.6094 C941.4507,1390.6094 959.4507,1390.6094 959.4507,1380.6094" fill="none" style="stroke:#181818;stroke-width:1.5;"/></g><g><title>Browser</title><rect fill="#FFFFFF" height="132.8633" style="stroke:#181818;stroke-width:1;" width="10" x="135.0005" y="248.0371"/></g><g><title>Browser</title><rect fill="#FFFFFF" height="65.9316" style="stroke:#181818;stroke-width:1;" width="10" x="135.0005" y="751.8691"/></g><g><title>WebSocket</title><rect fill="#FFFFFF" height="370.9688" style="stroke:#181818;stroke-width:1;" width="10" x="426" y="380.9004"/></g><g><title>Game</title><rect fill="#FFFFFF" height="281.7266" style="stroke:#181818;stroke-width:1;" width="10" x="652.9644" y="425.5215"/></g><g><title>Game</title><rect fill="#FFFFFF" height="303.3477" style="stroke:#181818;stroke-width:1;" width="10" x="652.9644" y="905.4219"/></g><g><title>Redis</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="838.2861" y="528.7637"/></g><g><title>Redis</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="838.2861" y="633.3164"/></g><g><title>Redis</title><rect fill="#FFFFFF" height="59.9316" style="stroke:#181818;stroke-width:1;" width="10" x="838.2861" y="955.043"/></g><g><title>Redis</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="838.2861" y="1179.459"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="936.4507" y="1105.5273"/></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="990.2441" x="0" y="188.7607"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="990.2441" y1="188.7607" y2="188.7607"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="990.2441" y1="191.7607" y2="191.7607"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="93.2314" x="448.5063" y="178.1055"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="74.9468" x="454.5063" y="194.6738">User Clicks</text><g class="message" data-participant-1="user" data-participant-2="browser"><polygon fill="#181818" points="123.0005,244.0371,133.0005,248.0371,123.0005,252.0371,127.0005,248.0371" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="33.1826" x2="129.0005" y1="248.0371" y2="248.0371"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82.8179" x="40.1826" y="227.9844">Click Bitcoin</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81.4658" x="40.1826" y="243.2949">(tap tap tap!)</text></g><g class="message" data-participant-1="browser" data-participant-2="browser"><line style="stroke:#181818;stroke-width:1;" x1="145.0005" x2="187.0005" y1="323.2793" y2="323.2793"/><line style="stroke:#181818;stroke-width:1;" x1="187.0005" x2="187.0005" y1="323.2793" y2="336.2793"/><line style="stroke:#181818;stroke-width:1;" x1="146.0005" x2="187.0005" y1="336.2793" y2="336.2793"/><polygon fill="#181818" points="156.0005,332.2793,146.0005,336.2793,156.0005,340.2793,152.0005,336.2793" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="135.3892" x="152.0005" y="272.6055">Collect clicks locally</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128.8257" x="152.0005" y="287.916">- Wait 2 seconds OR</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.6196" x="152.0005" y="303.2266">- Collect 50 clicks</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.4512" x="152.0005" y="318.5371">(reduces network traffic)</text></g><g class="message" data-participant-1="browser" data-participant-2="ws"><polygon fill="#181818" points="414,376.9004,424,380.9004,414,384.9004,418,380.9004" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="140.0005" x2="420" y1="380.9004" y2="380.9004"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="73.4614" x="147.0005" y="360.8477">Send batch</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186.748" x="147.0005" y="376.1582">WebSocket: "I have 50 clicks!"</text></g><g class="message" data-participant-1="ws" data-participant-2="game"><polygon fill="#181818" points="640.9644,421.5215,650.9644,425.5215,640.9644,429.5215,644.9644,425.5215" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="436" x2="646.9644" y1="425.5215" y2="425.5215"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="166.4736" x="443" y="405.4688">Forward to Game Service</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197.9644" x="443" y="420.7793">gRPC: ProcessClick(user_id, 50)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="990.2441" x="0" y="454.1768"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="990.2441" y1="454.1768" y2="454.1768"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="990.2441" y1="457.1768" y2="457.1768"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="123.0591" x="433.5925" y="443.5215"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="104.7744" x="439.5925" y="460.0898">Fast Processing</text><g class="message" data-participant-1="game" data-participant-2="redis"><polygon fill="#181818" points="826.2861,524.7637,836.2861,528.7637,826.2861,532.7637,830.2861,528.7637" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="662.9644" x2="832.2861" y1="528.7637" y2="528.7637"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="122.1987" x="669.9644" y="493.4004">1. Check rate limit</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.4326" x="669.9644" y="508.7109">Am I clicking too fast?</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.0498" x="669.9644" y="524.0215">(max 10 clicks/second)</text></g><g class="message" data-participant-1="redis" data-participant-2="game"><polygon fill="#181818" points="673.9644,554.0742,663.9644,558.0742,673.9644,562.0742,669.9644,558.0742" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="667.9644" x2="842.2861" y1="558.0742" y2="558.0742"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.2832" x="679.9644" y="553.332">&#10003; OK, not too fast</text></g><g class="message" data-participant-1="game" data-participant-2="redis"><polygon fill="#181818" points="826.2861,629.3164,836.2861,633.3164,826.2861,637.3164,830.2861,633.3164" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="662.9644" x2="832.2861" y1="633.3164" y2="633.3164"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="119.7358" x="669.9644" y="582.6426">2. Add to pending</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150.5854" x="669.9644" y="597.9531">HINCRBY clicks:pending</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76.5845" x="669.9644" y="613.2637">user_id +50</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.9092" x="669.9644" y="628.5742">(temporary storage)</text></g><g class="message" data-participant-1="redis" data-participant-2="game"><polygon fill="#181818" points="673.9644,658.627,663.9644,662.627,673.9644,666.627,669.9644,662.627" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="667.9644" x2="842.2861" y1="662.627" y2="662.627"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.3218" x="679.9644" y="657.8848">&#10003; Saved: 1,250 pending</text></g><g class="message" data-participant-1="game" data-participant-2="ws"><polygon fill="#181818" points="447,703.248,437,707.248,447,711.248,443,707.248" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="441" x2="656.9644" y1="707.248" y2="707.248"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="64.3589" x="453" y="687.1953">Response</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.1743" x="453" y="702.5059">Success! New total: 12,450</text></g><g class="message" data-participant-1="ws" data-participant-2="browser"><polygon fill="#181818" points="156.0005,747.8691,146.0005,751.8691,156.0005,755.8691,152.0005,751.8691" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="150.0005" x2="430" y1="751.8691" y2="751.8691"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="87.7119" x="162.0005" y="731.8164">Update score</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="261.9995" x="162.0005" y="747.127">WebSocket: "You now have 12,450 clicks"</text></g><g class="message" data-participant-1="browser" data-participant-2="browser"><line style="stroke:#181818;stroke-width:1;" x1="145.0005" x2="187.0005" y1="816.8008" y2="816.8008"/><line style="stroke:#181818;stroke-width:1;" x1="187.0005" x2="187.0005" y1="816.8008" y2="829.8008"/><line style="stroke:#181818;stroke-width:1;" x1="140.0005" x2="187.0005" y1="829.8008" y2="829.8008"/><polygon fill="#181818" points="150.0005,825.8008,140.0005,829.8008,150.0005,833.8008,146.0005,829.8008" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="73.6392" x="152.0005" y="781.4375">Animate UI</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.6084" x="152.0005" y="796.748">- Update counter</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.7017" x="152.0005" y="812.0586">- Show +50 animation</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="990.2441" x="0" y="853.4561"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="990.2441" y1="853.4561" y2="853.4561"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="990.2441" y1="856.4561" y2="856.4561"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="334.8931" x="327.6755" y="842.8008"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="316.6084" x="333.6755" y="859.3691">Background: Save to Database (Every 1 second)</text><g class="message" data-participant-1="game" data-participant-2="game"><line style="stroke:#181818;stroke-width:1;" x1="657.9644" x2="704.9644" y1="892.4219" y2="892.4219"/><line style="stroke:#181818;stroke-width:1;" x1="704.9644" x2="704.9644" y1="892.4219" y2="905.4219"/><line style="stroke:#181818;stroke-width:1;" x1="663.9644" x2="704.9644" y1="905.4219" y2="905.4219"/><polygon fill="#181818" points="673.9644,901.4219,663.9644,905.4219,673.9644,909.4219,669.9644,905.4219" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="157.0537" x="669.9644" y="887.6797">Timer: 1000ms elapsed</text></g><g class="message" data-participant-1="game" data-participant-2="redis"><polygon fill="#181818" points="826.2861,951.043,836.2861,955.043,826.2861,959.043,830.2861,955.043" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="662.9644" x2="832.2861" y1="955.043" y2="955.043"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="144.1235" x="669.9644" y="934.9902">Get all pending clicks</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.9375" x="669.9644" y="950.3008">HGETALL clicks:pending</text></g><g class="message" data-participant-1="redis" data-participant-2="game"><polygon fill="#181818" points="673.9644,1010.9746,663.9644,1014.9746,673.9644,1018.9746,669.9644,1014.9746" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="667.9644" x2="842.2861" y1="1014.9746" y2="1014.9746"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68.3643" x="679.9644" y="979.6113">user1: 150</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68.3643" x="679.9644" y="994.9219">user2: 200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68.3643" x="679.9644" y="1010.2324">user3: 100</text></g><g class="message" data-participant-1="game" data-participant-2="db"><polygon fill="#181818" points="924.4507,1101.5273,934.4507,1105.5273,924.4507,1109.5273,928.4507,1105.5273" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="662.9644" x2="930.4507" y1="1105.5273" y2="1105.5273"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="87.1343" x="669.9644" y="1039.543">Batch update</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.1626" x="669.9644" y="1054.8535">UPDATE users</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.0332" x="669.9644" y="1070.1641">SET total_clicks =</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140.3721" x="678.1909" y="1085.4746">total_clicks + pending</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.167" x="669.9644" y="1100.7852">WHERE user_id IN (...)</text></g><g class="message" data-participant-1="db" data-participant-2="game"><polygon fill="#181818" points="673.9644,1130.8379,663.9644,1134.8379,673.9644,1138.8379,669.9644,1134.8379" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="667.9644" x2="940.4507" y1="1134.8379" y2="1134.8379"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117.2158" x="679.9644" y="1130.0957">&#10003; Updated 3 users</text></g><g class="message" data-participant-1="game" data-participant-2="redis"><polygon fill="#181818" points="826.2861,1175.459,836.2861,1179.459,826.2861,1183.459,830.2861,1179.459" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="662.9644" x2="832.2861" y1="1179.459" y2="1179.459"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="93.666" x="669.9644" y="1159.4063">Clear pending</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118.606" x="669.9644" y="1174.7168">DEL clicks:pending</text></g><g class="message" data-participant-1="redis" data-participant-2="game"><polygon fill="#181818" points="668.9644,1204.7695,658.9644,1208.7695,668.9644,1212.7695,664.9644,1208.7695" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="662.9644" x2="842.2861" y1="1208.7695" y2="1208.7695"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.9658" x="674.9644" y="1204.0273">&#10003; Cleared</text></g><path d="M5,1221.7695 L5,1322.7695 L970,1322.7695 L970,1231.7695 L960,1221.7695 L5,1221.7695" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M960,1221.7695 L960,1231.7695 L970,1231.7695 L960,1221.7695" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="65.5205" x="319.0542" y="1239.3379">Summary:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="252.8716" x="319.0542" y="1254.6484">1. User clicks &#8594; Batched in browser (2s)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="314.1392" x="319.0542" y="1269.959">2. Send to server &#8594; Stored in Redis (fast memory)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="328.1357" x="319.0542" y="1285.2695">3. Background task &#8594; Save to PostgreSQL (every 1s)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1133" x="319.0542" y="1300.5801">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="231.6958" x="319.0542" y="1315.8906">Result: Sub-100ms response time!</text><!--SRC=[bLNTRY8t5BwVfpYXDy021TBS8D4A2CcYHbdA44KhHLgP6OTOpDWZssGsBz07Q6_xTFiaFSVsi0DiswqGCFASt-_xph4LDkCGYxp0lracaXtSPAg4-USYOv9PeMGKcPsG1TCiXmrBTbkjzZATgKnf-E5cJf-QnGkJQQc5jLp2CyiCZoAMM3HjF1Yk6y0CxF4XGcih4b4mQQ4nrQh4moVPN76qXabHj9pfnhyujdxacrWbEswVPCprQuXQccEhMvPpRo0IxYosU1AbpB8DCnmQAvuAWodNF2-KPlhDfzHqN3DRAcEtciU_tQ7jakkSIIwjjqqtKJGU0tNcmJCm7aSHDGZTdwlgHz1kUsYdmYPAo7ORGrbMGFXUj0WZySeiFtGSXOVJE2hBE2AK-6oPIbYMlL70BZmoOM48XYTAfWO-hEYmShZg1nzCZItk4sv0SbiglGEhsVEpI5f7IKj3-M8kKsJT9Y-Kuu3y21eBfFgLVurxqOXIVjR6uG3fYKf3WOa62dsZTCbq2bO1SGM1AigpNIrd8rXgXLKQ1rsJCFqaqWuchA7bA2KARfYnbOEGMqS3lQI4Zb7AEEZ1x8KZ3vfyCv4BIzacEIny4-HfbKBX6liB0fMppp2e6lpH0rlBxgNYVg5xwEpBNt_2Xryx89Kz1Aj3uxtEgnlsO98wE0e47KkXsjulxcUhwSTGmYYyUP813dXtrISjLH86WwF6jloxYeoHltG4WyuGIGoH_x7GWo9Mt1HA6iTJl4y8y0kuvoKMRbc6uOQTdwxwzJYU94z-JSeFHKflJQ8qFnNNHxL7_4elCHynG72aCXJLzmxEH8gSp1uMVbX2zWHtcQNDquNu1HCYdi2SAMs-RmYQn3OzRC6H0v4ukwuMHdEE6-aD1c4EMqTIhBI_5ZcLDUZt-xa1dh72yBJTFXNscKPkkGKS-8gjW8aJokryFRcxEn7AVyc0P3J0EaX5z3mSmR0VdYzTVV-Yt7H39KrfES3UmKc5F2ol9-kvYuox9fwllJ0-XOqrXYS9nqVlu23hn_VpbVSbSI_keTdhzMfYneMRRavax9bCuTBdh1TC-_aCmrd6cQxFsFNy_y96QLqOddu3dpFfuoRWe50Mhi8EbGMqM_TvZZCxGju1S3UvQoHWykNtFy0XYuq9MQaFcaFJGcDS5Mune-wCkm6TVOopxytTrGPDsZoGyrpXtOPUbxsQSl7UCJll5XJyzQA39lSQncIkKfpvVOPp6UyttO6Jh0vR02mg-G8xe7Aep-Xl]--></g></svg>